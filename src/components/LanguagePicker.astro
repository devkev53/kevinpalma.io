---
import { languages } from '../i18n/ui';
import ArrowDown from '@/icons/ArrowDown.astro';
import {
  getLangFromUrl,
  useTranslations,
  useTranslatedPath
} from '@/i18n/utils.ts'
import GtIcon from '@/icons/GtIcon.astro'
import UsIcon from '@/icons/UsIcon.astro'

const lang = getLangFromUrl(Astro.url)
const t = useTranslations(lang)
let optionLanguages
const translatePath = useTranslatedPath(lang)
---

<!-- <div class="lang">
  <span class="selected">
    {lang === 'en' ? <UsIcon/> : <GtIcon/>}
    {lang}
    <ArrowDown/>
    <input class="check" type="checkbox">
  </span>
  <div class="content">
    <ul class="langList">
      {Object.entries(languages).map(([lang, label]) => (
        <li>
          <a href={translatePath("/", lang)}>
            {label === 'EN' ? <UsIcon/> : <GtIcon/>}
            {label}
          </a>
        </li>
      ))}
    </ul>
  </div>
</div> -->

{
  Object.entries(languages).map(([listLang, label]) => {
    if (listLang === lang) return null
    return (
      <a class="changeLang" href={translatePath("/", listLang)}>
        {listLang === 'en' ? <UsIcon/> : <GtIcon/>}
        <span class="textLang">{listLang}</span>
      </a>
    )
  })
}

<style is:global>
  .lang .selected svg {
    width: 2.4rem;
    height: 2.4rem;
  }
  .langList a svg {
    height: 2.4rem;
    width: 2.4rem;
  }
  .changeLang svg {
    animation: animationFlag 1s ease;
  }
</style>

<style>
  .changeLang {
    height: 3.6rem;
    width: 3.6rem;
    min-height: 3.6rem;
    min-width: 3.6rem;
    background: rgba(255,255,255, .3);
    border-radius: 100%;
    transition: .3s all ease;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    overflow: hidden;
  }
  .changeLang::before {
    content: '';
    width: 100%;
    height: 100%;
    position: absolute;
    background: rgba(0,0,0,.5); 
    z-index: 1;
  }
  .textLang {
    position: absolute;
    text-transform: uppercase;
    font-weight: bold;
    color: #FFF;
    z-index: 2;
  }

  @keyframes animationFlag {
    0% {opacity: 0; transform: scale(0) rotate(360deg);}
    100% {opacity: 1; transform: scale(1) rotate(0);}
  }
</style>

<!-- <script src="@/js/langBtn.js"></script> -->